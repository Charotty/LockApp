# Описание логики кнопок и их функций в приложении LockApp

## Главный экран (ModeSelectActivity)

- **Кнопка "WiFi-замок"**
  - Открывает настройки WiFi Android.
  - После подключения к нужной сети (SSID Arduino) приложение проверяет соединение и разрешает управление замком по WiFi.
  - При нажатии на кнопку управления замком по WiFi:
    - Если подключение к Arduino установлено, отправляется команда открытия/закрытия замка через локальную сеть.
    - Если нет подключения — выводится предупреждение.

- **Кнопка "Bluetooth-замок"**
  - Открывает настройки Bluetooth Android.
  - После сопряжения с устройством Arduino (по имени) приложение разрешает управление замком по Bluetooth.
  - При нажатии на кнопку управления замком по Bluetooth:
    - Если сопряжение с Arduino активно, отправляется команда открытия/закрытия замка через Bluetooth.
    - Если нет подключения — выводится предупреждение.

- **Кнопка-шестерёнка (настройки)**
  - Открывает диалог для ручного ввода SSID WiFi и имени Bluetooth Arduino.
  - После сохранения эти параметры используются для проверки соединения.
  - Изменённые значения сохраняются в SharedPreferences, чтобы не нужно было вводить их каждый раз.

- **Кнопка "Администрирование"**
  - Открывает AdminTableActivity — экран управления пользователями.
  - Только после успешной локальной аутентификации.

- **Кнопка "Журнал событий"**
  - Открывает EventLogActivity — экран просмотра и фильтрации событий.
  - Показывает историю всех действий (входы, открытия замка, ошибки и т.д.).

---

## Экран администрирования пользователей (AdminTableActivity)

- **Кнопка "Добавить"**
  - Открывает всплывающее окно для ввода ФИО, должности и пароля нового пользователя.
  - После подтверждения:
    - Проверяет, что ФИО уникально (нет совпадений в базе).
    - Добавляет пользователя в SQLite и обновляет список на экране.
    - При успехе показывает уведомление.
    - При ошибке (например, дублирование ФИО) показывает предупреждение.

- **Кнопка "Удалить"**
  - Требует выбрать пользователя из списка.
  - После нажатия удаляет выбранного пользователя из базы и списка.
  - Показывает уведомление об успехе или ошибке.

- **Кнопка "Сбросить"**
  - Требует выбрать пользователя из списка.
  - После нажатия очищает у пользователя RFID и отпечатки пальцев.
  - Не трогает ФИО, должность и пароль.
  - Показывает уведомление о сбросе.

- **Кнопка "Обновить с Arduino"**
  - Доступна только при активном соединении с Arduino (WiFi или Bluetooth).
  - При нажатии запрашивает у Arduino список пользователей (ID, RFID, отпечатки).
  - Обновляет технические данные в локальной базе, не изменяя ФИО и пароли.
  - Показывает результат синхронизации (успех/ошибка).

- **Кнопка "Отправить на Arduino"**
  - Доступна только при активном соединении с Arduino (WiFi или Bluetooth).
  - При нажатии отправляет технические данные пользователей (ID, RFID, отпечатки) на Arduino.
  - Не передаёт ФИО и пароли.
  - Показывает результат отправки (успех/ошибка).

- **Кнопка с иконкой дискеты (Сохранить)**
  - Показывает уведомление "Сохранено".
  - Вся работа с пользователями сохраняется сразу, эта кнопка нужна только для визуального подтверждения.

- **Кнопка с иконкой крестика (Выход)**
  - Закрывает AdminTableActivity и возвращает пользователя на главный экран.
  - Все несохранённые изменения уже были сохранены.

---

## Журнал событий (EventLogActivity)

- **Поля фильтрации (дата, пользователь, статус) и кнопка "Фильтр"**
  - Позволяют ввести дату (формат YYYY-MM-DD), часть ФИО и статус (например, "Успех").
  - После нажатия "Фильтр" загружаются только подходящие события.
  - Если поля пустые — показываются все события.

- **Список событий**
  - Для каждого события показывается:
    - Строка 1: ФИО (должность) — способ (например, "PIN") и результат ("Успех"/"Ошибка").
    - Строка 2: номер попытки и время события.
  - События берутся из локальной базы eventlog.db.

---

## Прочее
- Все действия с пользователями и журналом событий происходят только локально, без подключения к серверу.
- Синхронизация с Arduino работает только при активном соединении.
- Все настройки подключения задаются вручную через диалог настроек.
